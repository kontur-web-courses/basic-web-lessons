<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="reveal/css/reveal.css">
    <link rel="stylesheet" href="reveal/css/theme/kontur-light.css" id="theme">
    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="reveal/css/highlight/idea-for-light.css">
    <link rel="stylesheet" href="reveal/css/highlight/darkula-for-dark.css">
    <!--[if lt IE 9]>
    <script src="reveal/js/html5shiv.js"></script>
    <![endif]-->
    <script defer src="reveal/js/head.min.js"></script>
    <script defer src="reveal/js/reveal.js"></script>
    <script defer src="reveal/initialize.js"></script>
    <script defer src="reveal/js/d3.min.js"></script>

    <title>Event Loop</title>
</head>
<body>

<div class="reveal"><div class="slides">

<section data-markdown><script type="text/template">
# Event Loop

</script></section>

<section data-markdown><script type="text/template">

### Что происходит в этом коде?

```
let clickCount = 0;
document.addEventListener("click", function() {
    clickCount++;
    console.log("clicked", clickCount);
});

while (clickCount !== 5) {
    console.log("wait");
}

console.log("5 clicks!");

```

***

### Запусти этот код в браузере


```
let clickCount = 0;
document.addEventListener("click", function() {
    clickCount++;
    console.log("clicked", clickCount);
});

while (clickCount !== 5) {
    console.log("wait");
}

console.log("5 clicks!");

```

Его можно скопировать из файла `tasks/event-loop.js`

***

### Что происходит? Почему так?

```
let clickCount = 0;
document.addEventListener("click", function() {
    clickCount++;
    console.log("clicked", clickCount);
});

while (clickCount !== 5) {
    console.log("wait");
}

console.log("5 clicks!");

```

***

### Event Loop

<div style="text-align: center">
    <img src="assets/event-loop.png"  alt="event-loop">
</div>

***

### Анимированый Event Loop

<a href="http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZXIoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBjbGlja2VkIHRoZSBidXR0b24hJyk7ICAgIAogICAgfSwgMjAwMCk7Cn0pOwoKY29uc29sZS5sb2coIkhpISIpOwoKc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0KCkgewogICAgY29uc29sZS5sb2coIkNsaWNrIHRoZSBidXR0b24hIik7Cn0sIDUwMDApOwoKY29uc29sZS5sb2coIldlbGNvbWUgdG8gbG91cGUuIik7!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">
    Ссылка
</a>

***

### Как можно переписать этот код, чтобы он заработал


```
let clickCount = 0;
document.addEventListener("click", function() {
    clickCount++;
    console.log("clicked", clickCount);
});

while (clickCount !== 5) {
    console.log("wait");
}

console.log("5 clicks!");

```


***

Если хочешь разобраться глубже, посмотри это видео:
[Philip Roberts: What the heck is the event loop anyway?](https://www.youtube.com/watch?v=8aGhZQkoFbQ)
([русский перевод](https://www.youtube.com/watch?v=8cV4ZvHXQL4))


</script></section>

</div></div>
</body>
</html>